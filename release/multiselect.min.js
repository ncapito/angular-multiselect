angular.module("shalotelli-angular-multiselect.templates",[]).run(["$templateCache",function(e){e.put("/directives/multi-select.html",'<div class="multi-select"><input type="text" class="form-control multi-select-container" ng-click="toggleDropdown()" value="{{displayOptions()}}" placeholder="None Selected" readonly="readonly"><div class="multi-select-dropdown hide"><div class="multi-select-filters" ng-show="showFilters"><span class="multi-select-filter" ng-click="selectAll()"><input type="checkbox" ng-model="allSelected" ng-click="clickSelectAllCheckbox($event)" class="multi-select-select-all-checkbox"> Select All</span></div><!-- ./multi-select-filters --><ul><li class="multi-select-option" ng-repeat="value in values"><a class="multi-select-option-link" href="javascript:;" ng-if="!isOther(value)" ng-click="selectOption(value)" ng-class="{selected: isSelected(value)}"><input type="checkbox" ng-checked="isOptionSelected(value)" ng-click="clickCheckbox($event, value)"> {{value[labelField]}}</a><!-- ./multi-select-option-link --><div class="multi-select-other-container" ng-if="showOther && isOther(value)"><input type="text" class="form-control multi-select-other" placeholder="Other" ng-change="syncOther(value)" ng-keypress="close($event)" ng-model="shared.other"></div><!-- ./multi-select-other-container --></li><!-- ./multi-select-option --></ul></div><!-- ./multi-select-dropdown --></div>'),e.put("/directives/multi-select2.html",'<div class="multi-select"><input type="text" class="form-control multi-select-container" ng-click="toggleDropdown()" value="{{displayOptions()}}" placeholder="None Selected" readonly="readonly"><div class="multi-select-dropdown" ng-if="_render" ng-show="visible"><div class="multi-select-filters" ng-show="showFilters"><span class="multi-select-filter" ng-click="selectAll()"><input type="checkbox" ng-model="allSelected" ng-click="clickSelectAllCheckbox($event)" class="multi-select-select-all-checkbox"> Select All</span></div><!-- ./multi-select-filters --><ul class="dropdown-items"><li class="multi-select-option" ng-repeat="value in _values"><a class="multi-select-option-link" href="javascript:;" ng-if="!isOther(value)" ng-click="selectOption(value)" ng-class="{selected: isOptionSelected(value)}"><input type="checkbox" ng-checked="isOptionSelected(value)" ng-click="clickCheckbox($event, value)"> <span ng-bind="value[labelField]"></span></a><!-- ./multi-select-option-link --><div class="multi-select-other-container" ng-if="showOther && isOther(value, true)"><input type="text" class="form-control multi-select-other" placeholder="Other" ng-change="syncOther(value)" ng-keypress="close($event)" ng-model="shared.other"></div><!-- ./multi-select-other-container --></li><!-- ./multi-select-option --></ul></div><!-- ./multi-select-dropdown --></div>')}]),function(e){"use strict";e.module("shalotelli-angular-multiselect",["shalotelli-angular-multiselect.templates","pasvaz.bindonce"]),e.module("shalotelli-angular-multiselect").directive("multiSelect",["multiSelectConfig","$timeout","$log",function(l,t){return{templateUrl:function(e,t){return void 0!==t.templatePath?t.templatePath:l.templatePath},restrict:"E",replace:!0,scope:{values:"=",model:"=",name:"@",showFilters:"@",showOther:"@",isSelected:"&",otherNgModel:"@",otherField:"@",otherEvent:"@",valueField:"@",labelField:"@",templatePath:"@",closeOnSelect:"@",emitOnSelect:"@"},link:function(n,o,i){function c(e){return e[n.otherField]===!0}function s(){n.shared={other:""}}var a=o.find(".multi-select-dropdown"),r=function(){var e="multiSelectUpdate",l="";return l=1===n.model.length?n.model[0][n.labelField]:n.areAllSelected()&&n.model.length?"All Selected":n.model.length>1?n.model.length+" Selected":"None Selected",void 0!==i.name&&(e+="_"+i.name),n.$emit(e,l),l},u=function(){n.selectedOptions=[];for(var e=0;e<n.model.length;e++)n.selectedOptions[n.model[e][n.valueField]]=!0},d=function(e){return n.selectedOptions[e[n.valueField]]};n.displayOptions=r,n.isOptionSelected=d;var h=n.$watch("model",function(l){if(e.isDefined(l)){if(l.length){var t=m();t&&(n.shared.other=t[n.otherNgModel]||"")}h()}});n.selectedOptions=[],i.$observe("showFilters",function(e){n.showFilters=e||!0}),i.$observe("showOther",function(e){n.showOther=e||!1}),i.$observe("otherEvent",function(l){switch(void 0!==l&&l.match(/blur|keyup|enter/)||(l="keyup"),l.toLowerCase()){case"blur":case"keyup":e.element(".multi-select-other").on(l,function(){r()});break;case"enter":e.element(".multi-select-other").on("keydown keypress",function(e){13===e.which&&(e.preventDefault(),r())})}}),i.$observe("valueField",function(e){n.valueField=e||"value"}),i.$observe("otherField",function(e){n.otherField=e||l.otherField}),i.$observe("closeOnSelect",function(e){n.closeOnSelect="true"===e||l.closeOnSelect}),i.$observe("emitOnSelect",function(e){n.emitOnSelect="true"===e||l.emitOnSelect}),n.isOther=c,i.$observe("otherNgModel",function(e){n.otherNgModel=e||l.otherNgModel}),i.$observe("labelField",function(e){n.labelField=e||"label"}),e.element(document).on("click",function(e){-1===e.target.className.indexOf("multi-select")&&a.removeClass("show").addClass("hide")}),n.close=function(e){13===e.which&&(e.preventDefault(),a.removeClass("show").addClass("hide"))},n.toggleDropdown=function(){a.hasClass("hide")?(e.element("body").find(".multi-select-dropdown").removeClass("show").addClass("hide"),a.removeClass("hide").addClass("show")):a.removeClass("show").addClass("hide")},n.selectAll=function(){if(n.allSelected=n.areAllSelected(),n.model.length=0,n.allSelected)s(),u();else for(var e=0;e<n.values.length;e++){if(c(n.values[e]))return;n.selectOption(n.values[e],!0)}n.allSelected=!n.allSelected},n.clickSelectAllCheckbox=function(e){e.stopPropagation(),n.selectAll()},n.areAllSelected=function(){for(var e=!1,l=n.values.length,t=n.model.length,o=a.find(".multi-select-select-all-checkbox"),i=0;i<n.values.length;i++)c(n.values[i])&&l--;for(var s=0;s<n.model.length;s++)c(n.model[s])&&t--;return e=t===l,!e&&n.model.length>0?o.prop("indeterminate",!0):o.prop("indeterminate",!1),e};var m=function(){for(var e,l=0;l<n.model.length;l++)if(e=n.model[l],c(e))return e},v=function(e,l){var t;e=e||[];for(var o=0;o<e.length;o++)if(t=e[o],l[n.valueField]===t[n.valueField])return t},p=function(e){return v(n.model,e)};n.shared={other:""},n.syncOther=function(e){var l=p(e);l?n.shared.other||(l=n.selectOption(e,!0)):n.shared.other&&(l=n.selectOption(e,!0)),l&&(l[n.otherNgModel]=n.shared.other)},i.isSelected||u(),n.clickCheckbox=function(e,l){e.stopPropagation(),n.selectOption(l)},n.selectOption=function(l,t){var o=p(l),r="multiSelectOption";return o?(n.model.splice(n.model.indexOf(o),1),delete n.selectedOptions[o[n.valueField]],c(o)&&s()):(o=e.copy(l),n.model.push(o),n.selectedOptions[o[n.valueField]]=!0),n.closeOnSelect&&a.removeClass("show").addClass("hide"),t||(n.allSelected=n.areAllSelected()),n.emitOnSelect&&(void 0!==i.name&&(r+="_"+i.name),n.$emit(r,n.model,l)),o},n.model.length>0&&(n.allSelected=n.areAllSelected()),n.$on("multiSelectClearAll",function(){n.model.length=0,t(function(){u(),n.allSelected=!1,s()})}),n.$on("multiSelectClear",function(e,l){n.name&&n.name===l&&(n.model.length=0,t(function(){u(),n.allSelected=!1,s()}))}),n.$on("multiSelectRefreshAll",function(){t(function(){u()})}),n.$on("multiSelectRefresh",function(e,l,o){n.name&&n.name===l&&(void 0!==o&&(n.model=o),t(function(){u()}))})}}}])}(angular),function(e){"use strict";e.module("shalotelli-angular-multiselect").provider("multiSelectConfig",function(){var e={templatePath:"/directives/multi-select.html",templatePath2:"/directives/multi-select2.html",otherField:"isOther",otherNgModel:"other",closeOnSelect:!1};this.setDefaults=function(l){angular.extend(e,l||{})},this.$get=[function(){return e}]})}(angular),function(e){"use strict";function l(l,t){function n(e,t){return void 0!==t.templatePath?t.templatePath:l.templatePath2}return{templateUrl:n,restrict:"E",replace:!0,scope:{values:"=",model:"=",name:"@",showFilters:"@",showOther:"@",isSelected:"&",otherNgModel:"@",otherField:"@",otherEvent:"@",valueField:"@",labelField:"@",templatePath:"@",closeOnSelect:"@",emitOnSelect:"@"},link:function(n,o,i){function c(){i.$observe("showFilters",function(e){n.showFilters=e||!0}),i.$observe("showOther",function(e){n.showOther="true"===e||!1}),i.$observe("valueField",function(e){n.valueField=e||"value"}),i.$observe("otherField",function(e){n.otherField=e||l.otherField}),i.$observe("closeOnSelect",function(e){n.closeOnSelect="true"===e||l.closeOnSelect}),i.$observe("emitOnSelect",function(e){n.emitOnSelect="true"===e||l.emitOnSelect}),i.$observe("otherNgModel",function(e){n.otherNgModel=e||l.otherNgModel}),i.$observe("labelField",function(e){n.labelField=e||"label"}),i.$observe("otherEvent",function(l){switch(void 0!==l&&l.match(/blur|keyup|enter/)||(l="keyup"),l.toLowerCase()){case"blur":case"keyup":e.element(".multi-select-other").on(l,function(){A()});break;case"enter":e.element(".multi-select-other").on("keydown keypress",function(e){13===e.which&&(e.preventDefault(),A())})}})}function s(e){return e[n.otherField]===!0}function a(e){13===e.which&&(e.preventDefault(),n.visible=!1)}function r(){n._render||(n._render=!0,n._values.push.apply(n._values,n.values.slice(0,200)),_.addClass("loading")),t(function(){n.visible=!n.visible,u()})}function u(){n._values.push.apply(n._values,n.values.slice(n._values.length,n._values.length+200)),n._values.length!==n.values.length?t(u):_.removeClass("loading")}function d(){if(n.allSelected)w();else for(var e=0;e<n.values.length;e++)s(n.values[e])||x(n.values[e])||n.selectOption(n.values[e],!1)}function h(e){e.stopPropagation(),n.selectAll()}function m(){for(var e=!1,l=n.values.length,t=n.model.length,o=_.find(".multi-select-select-all-checkbox"),i=0;i<n.values.length;i++)s(n.values[i])&&l--;for(var c=0;c<n.model.length;c++)s(n.model[c])&&t--;return e=t===l,!e&&n.model.length>0?o.prop("indeterminate",!0):o.prop("indeterminate",!1),n.allSelected=e&&l>0,e}function v(){for(var e,l=0;l<n.model.length;l++)if(e=n.model[l],s(e))return e}function p(e,l){var t;e=e||[];for(var o=0;o<e.length;o++)if(t=e[o],l[n.valueField]===t[n.valueField])return t}function f(e){return p(n.model,e)}function g(){n.shared={other:""}}function O(e){var l=f(e);l?n.shared.other||(l=n.selectOption(e,!1)):n.shared.other&&(l=n.selectOption(e,!1)),l&&(l[n.otherNgModel]=n.shared.other)}function S(e,l){e.stopPropagation(),n.selectOption(l)}function b(l,t){var o=f(l),c="multiSelectOption";return o?(n.model.splice(n.model.indexOf(o),1),delete n.selectedOptionsHash[o[n.valueField]],s(o)&&g()):(o=e.copy(l),n.model.push(o),n.selectedOptionsHash[o[n.valueField]]=!0),n.closeOnSelect&&(n.visible=!1),n.emitOnSelect&&(void 0!==i.name&&(c+="_"+i.name),t!==!1&&n.$emit(c,n.model,l)),o}function k(){n.areAllSelected()}function w(){n.selectedOptionsHash={},n.model.length=0,n.allSelected=!1,g()}function F(e,l){angular.isDefined(l)&&n.name!==l||w()}function $(e,l){t(function(){y(e,l)})}function y(e,l){if(!angular.isDefined(l)||n.name===l){n.selectedOptionsHash.length=0;for(var t=0;t<n.model.length;t++)n.selectedOptionsHash[n.model[t][n.valueField]]=!0}}function C(l){if(e.isDefined(l)){if(l.length){var t=v();t&&(n.shared.other=t[n.otherNgModel]||"")}y(),k(),n.$watch("model.length + values.length",k),N()}}function x(e){return n.selectedOptionsHash[e[n.valueField]]}function A(){var e="multiSelectUpdate",l="";return l=1===n.model.length?n.model[0][n.labelField]:n.allSelected?"All Selected":n.model.length>1?n.model.length+" Selected":"None Selected",void 0!==i.name&&(e+="_"+i.name),n.$emit(e,l),l}var N,_=o;n.shared={other:""},n._render=!1,n._values=[],n.syncOther=O,n.selectOption=b,n.displayOptions=A,n.isOptionSelected=x,n.selectedOptionsHash={},n.close=a,n.isOther=s,n.toggleDropdown=r,n.selectAll=d,n.clickSelectAllCheckbox=h,n.clickCheckbox=S,n.areAllSelected=m,c(),N=n.$watch("model",C),n.$on("multiSelectRefreshAll",$),n.$on("multiSelectRefresh",$),n.$on("multiSelectClearAll",F),n.$on("multiSelectClear",F),e.element(document).on("click",function(e){-1===e.target.className.indexOf("multi-select")&&n.$apply(function(){n.visible=!1})})}}}e.module("shalotelli-angular-multiselect").directive("multiSelect2",l),l.$inject=["multiSelectConfig","$timeout","$log"]}(angular);
//# sourceMappingURL=multiselect.min.js.map